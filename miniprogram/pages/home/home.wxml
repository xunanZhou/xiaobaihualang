<!--pages/home/home.wxml-->
<view class="home-container">
  <!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->
  <view class="custom-navbar">
    <view class="navbar-content">
      <text class="navbar-title">AIç”»å»Š</text>
      <view class="navbar-search" bindtap="onSearchTap">
        <t-icon name="search" size="40rpx" color="#666666" />
      </view>
    </view>
  </view>

  <!-- ä¸»å†…å®¹åŒºåŸŸ -->
  <view class="page-content">
    <!-- ä½œå“ç€‘å¸ƒæµ -->
    <view class="artworks-container">
      <view class="masonry">
        <view 
          class="masonry-item artwork-card fade-in" 
          wx:for="{{artworks}}" 
          wx:key="id"
          bindtap="onArtworkTap"
          data-artwork="{{item}}"
        >
          <view class="artwork-image-container">
            <t-image 
              src="{{item.imageUrl}}" 
              mode="aspectFill"
              class="artwork-image"
              loading="{{true}}"
              error="{{true}}"
              lazy="{{true}}"
            />
            <view class="artwork-likes">
              <t-icon name="heart-filled" size="24rpx" color="#ff4757" />
              <text class="likes-count">{{item.likes}}</text>
            </view>
          </view>
          
          <view class="artwork-info">
            <text class="artwork-prompt">{{item.prompt}}</text>
            <view class="artwork-meta">
              <view class="author-info">
                <t-avatar 
                  size="small" 
                  image="{{item.avatar}}" 
                  class="author-avatar"
                />
                <text class="author-name">{{item.author}}</text>
              </view>
              <text class="create-time">{{item.timeAgo}}</text>
            </view>
            
            <!-- é£æ ¼æ ‡ç­¾ -->
            <view class="style-tags" wx:if="{{item.styles && item.styles.length > 0}}">
              <t-tag 
                wx:for="{{item.styles}}" 
                wx:for-item="style" 
                wx:key="*this"
                size="small" 
                variant="light"
                class="style-tag"
              >
                {{style}}
              </t-tag>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- åŠ è½½æ›´å¤š -->
    <view class="loading-more" wx:if="{{loading}}">
      <t-loading theme="circular" size="40rpx" />
      <text class="loading-text">åŠ è½½æ›´å¤šç²¾å½©ä½œå“...</text>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{artworks.length === 0 && !loading}}">
      <view class="empty-icon">ğŸ¨</view>
      <text class="empty-title">æš‚æ— ä½œå“</text>
      <text class="empty-desc">å¿«å»åˆ›ä½œç¬¬ä¸€ä¸ªAIç”»ä½œå§ï¼</text>
      <t-button 
        theme="primary" 
        size="medium"
        class="create-btn"
        bindtap="onCreateTap"
      >
        å¼€å§‹åˆ›ä½œ
      </t-button>
    </view>
  </view>

  <!-- æ‚¬æµ®åˆ›å»ºæŒ‰é’® -->
  <t-fab 
    icon="add" 
    class="fab-create"
    bindtap="onCreateTap"
  />
</view>

<!-- Toast æç¤º -->
<t-toast id="t-toast" /> 